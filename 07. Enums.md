# Enums in C# 

# 1ï¸âƒ£ WHAT is an Enum?

## 1.1 Simple Definition (Beginnerâ€‘Friendly)
An **enum** is a named list of constant values that represent a fixed set of choices.

```csharp
enum OrderStatus
{
    Pending,
    Paid,
    Shipped,
    Delivered
}
```

Instead of using numbers like `0`, `1`, `2`, you use **meaningful names**.

---

## 1.2 Technical Definition (CLR / Runtime View)

> **An enum in C# is a stronglyâ€‘typed value type that wraps a primitive integral type.**

From the CLRâ€™s point of view:

- Enum **inherits from `System.Enum`**
- `System.Enum` ultimately inherits from `System.ValueType`
- Therefore â†’ **Enum is a VALUE TYPE**
- Stored as a **number** (int by default)

```text
System.Object
   â””â”€â”€ System.ValueType
         â””â”€â”€ System.Enum
               â””â”€â”€ YourEnum
```

---

## 1.3 Enum vs Constants (`const`)

| Feature | enum | const |
|------|------|------|
| Type safety | âœ… Yes | âŒ No (primitive) |
| Grouping | âœ… Logical group | âŒ Scattered |
| Debugging | âœ… Meaningful | âŒ Numbers |
| Runtime type | Yes | Inlined |
| Memory | Stored as value | No variable |

`const` values are **inlined at compile time**.  
Enums exist as **typed values at runtime**.

---

# 2ï¸âƒ£ WHY Use Enums?

## 2.1 Problem with Magic Numbers

```csharp
if (order.Status == 3) // âŒ What is 3?
{
}
```

Problems:
- No meaning
- Easy to misuse
- Hard to refactor

---

## 2.2 Enum Solution

```csharp
if (order.Status == OrderStatus.Shipped) // âœ… Clear
{
}
```

Benefits:
- Readable
- Compileâ€‘time safety
- IDE support

---

## 2.3 Realâ€‘World Analogy

Think of **traffic signals**:

```text
RED = 0
YELLOW = 1
GREEN = 2
```

You **say RED**, not `0`.  
The computer stores `0`, but **humans read RED**.

---

## 2.4 Interview Reasons

- Prevents invalid values
- Selfâ€‘documenting code
- Better than constants for state modeling
- Plays well with switch, logs, serialization

---

# 3ï¸âƒ£ HOW Enums Work (Runtime + Memory)

## 3.1 What an Enum Really Is

```csharp
enum Color
{
    Red = 1,
    Green = 2,
    Blue = 3
}
```

CLR sees this as:

```text
Color â†’ int (4 bytes)
```

Enum **does NOT store strings** like "Red".  
Only the **number** is stored.

---

## 3.2 Underlying Type

Default:
```csharp
enum Status { A, B, C } // int
```

Custom:
```csharp
enum Status : byte { A, B, C } // 1 byte
```

Supported:
- byte, sbyte
- short, ushort
- int, uint (default)
- long, ulong

---

## 3.3 Where Enum Values Live in Memory

### Case 1: Local Enum Variable

```csharp
void Test()
{
    OrderStatus status = OrderStatus.Paid;
}
```

```
STACK (Test)
--------------------
status = 1 (Paid)
--------------------
```

âœ” Stored directly on **stack**
âœ” Copied by value

---

### Case 2: Enum as Class Field

```csharp
class Order
{
    public OrderStatus Status;
}

var o = new Order();
o.Status = OrderStatus.Shipped;
```

```
STACK
--------------------
o  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
--------------------
                   â–¼
HEAP (Order object)
--------------------
Status = 2 (Shipped)
--------------------
```

âœ” Object on heap
âœ” Enum stored **inline inside object memory**

---

### Case 3: Enum Inside Struct

```csharp
struct OrderInfo
{
    public OrderStatus Status;
}
```

- Struct is value type
- Enum embedded directly

```
STACK
--------------------
OrderInfo
  Status = 2
--------------------
```

---

### Case 4: Enum as Method Parameter

```csharp
void Process(OrderStatus status)
{
}
```

```
STACK (Call Frame)
--------------------
status = 2
--------------------
```

âœ” Copied like an int

---

## 3.4 Stack vs Heap Summary

- Enum itself â†’ **value type**
- Lives wherever its container lives
- Behaves exactly like `int`

---

# 4ï¸âƒ£ Progressive Code Example (Lineâ€‘byâ€‘Line)

```csharp
enum PaymentStatus { Pending, Paid }

void Pay()
{
    PaymentStatus s = PaymentStatus.Paid;
    Print(s);
}

void Print(PaymentStatus status)
{
}
```

Execution:

1. `s` allocated on stack
2. Value `1` stored
3. Copied to `status`

```
STACK
--------------------
Pay(): s = 1
Print(): status = 1
--------------------
```

---

# 5ï¸âƒ£ Enum vs Int (Memory Comparison)

```csharp
int x = 1;
PaymentStatus s = PaymentStatus.Paid;
```

```
STACK
--------------------
x = 1 (int)
s = 1 (enum)
--------------------
```

ğŸ’¡ **Memory is identical â€” meaning is different**

---

# 6ï¸âƒ£ Enums with Methods & Properties

## 6.1 Why Enums Cannot Have Fields

- Enums are constants
- No instance memory
- No object identity

âŒ This is illegal:
```csharp
enum Status
{
    int Code; // âŒ
}
```

---

## 6.2 Extension Methods on Enums

```csharp
static class StatusExtensions
{
    public static string ToText(this OrderStatus status)
    {
        return status switch
        {
            OrderStatus.Pending => "Pending",
            OrderStatus.Paid => "Paid",
            _ => "Unknown"
        };
    }
}
```

Memory impact:
- Enum stays same (int)
- Extension method is **static code**
- No extra memory per enum value

---

# 7ï¸âƒ£ Special Enum Scenarios

## 7.1 Custom Underlying Type

```csharp
enum SmallStatus : byte
{
    A = 1,
    B = 2
}
```

```
Memory: 1 byte instead of 4
```

---

## 7.2 Flags Enum

```csharp
[Flags]
enum Permission
{
    Read = 1,
    Write = 2,
    Execute = 4
}
```

```csharp
Permission p = Permission.Read | Permission.Write;
```

Stored value:
```
3 (binary 011)
```

---

## 7.3 Boxing an Enum

```csharp
object o = OrderStatus.Paid;
```

```
STACK
--------------------
o â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
--------------------
                   â–¼
HEAP
--------------------
Boxed enum (1)
--------------------
```

âœ” Boxing allocates heap memory

---

## 7.4 Enum in Collections

```csharp
List<OrderStatus> list = new();
```

- List stores enum values inline in array
- No boxing

---

# 8ï¸âƒ£ Interviewâ€‘Ready Answers

### Oneâ€‘Liners

- **Enum is a stronglyâ€‘typed value type backed by an integral type**
- **Enum behaves like an int with semantic meaning**

---

### Common Questions

**Q: Is enum value type or reference type?**  
A: Value type

**Q: Stack or heap?**  
A: Depends on where itâ€™s declared

**Q: Can enum have methods?**  
A: No instance methods, but extension methods allowed

**Q: Does enum allocate memory?**  
A: Same as underlying integral type

---

# 9ï¸âƒ£ Design Perspective

## When to Use Enum

- Finite states
- Status fields
- Workflow steps
- State machines

## When NOT to Use Enum

- Dynamic values
- Frequently changing data
- Business rules with behavior â†’ use classes

---

# ğŸ”Ÿ Summary Table

| Scenario | Stored Where | Why |
|------|------|------|
| Local enum variable | Stack | Value type |
| Enum field in class | Heap | Part of object |
| Enum in struct | Stack/Heap | Inline |
| Enum parameter | Stack | Copied |
| Boxed enum | Heap | Object |
| Enum in list | Heap array | Inline storage |

---

# ğŸ§  Final Mental Model (Remember This)

> **An enum is just a named number.**  
> The **name exists for developers**, the **number exists for the CPU**.  
> At runtime, an enum is **no different from its underlying integer**, lives wherever its container lives, and only allocates heap memory when boxed.


